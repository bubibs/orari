<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TECNOSISTEM - The Italian Job</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  transition: background 0.3s, color 0.3s;
}

@media (prefers-color-scheme: dark) {
  body { background-color: #111; color: white; }
}
@media (prefers-color-scheme: light) {
  body { background-color: #f5f5f5; color: black; }
}

.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  max-width: 400px;
  margin-bottom: 10px;
}

.title-container {
  display: flex;
  flex-direction: column;
}

h1 { font-size: 2rem; margin: 0; }
h2 { font-size: 1rem; font-style: italic; margin: 0; }

#cloud-status {
  font-size: 2rem;
  transition: color 0.3s;
}
.cloud-icon.pending { color: gray; }
.cloud-icon.ok { color: green; }
.cloud-icon.error { color: red; }

#frase-motivazionale {
  text-align: center;
  margin: 15px 0 20px 0;
}

.btn-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  max-width: 350px;
  margin-top: 20px;
}

button {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  width: 100%;
  padding: 15px;
  margin: 10px 0;
  font-size: 1.2rem;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: transform 0.2s;
}

button:hover { transform: scale(1.03); }

button svg { width: 24px; height: 24px; margin-right: 10px; fill: white; }

.btn-report { background-color: #ff9800; color: white; }
.btn-economy { background-color: #03a9f4; color: white; }
.btn-settings { background-color: #4caf50; color: white; }
.btn-clients { background-color: #9c27b0; color: white; }
</style>
</head>
<body>

<div class="header">
  <div class="title-container">
    <h1>TECNOSISTEM</h1>
    <h2>The Italian Job</h2>
  </div>
  <div id="cloud-status" class="cloud-icon pending">☁️</div>
</div>

<h2 id="frase-motivazionale">Caricamento frase...</h2>

<div class="btn-container">
  <button class="btn btn-report" onclick="goTo('nuovo_report.html')">
    <svg viewBox="0 0 24 24"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zm0-8h14V7H7v2z"/></svg>
    Nuovo Report
  </button>
  <button class="btn btn-economy" onclick="goTo('andamento.html')">
    <svg viewBox="0 0 24 24"><path d="M12 1C5.92 1 1 5.92 1 12s4.92 11 11 11 11-4.92 11-11S18.08 1 12 1zm0 20c-4.97 0-9-4.03-9-9s4.03-9 9-9 9 4.03 9 9-4.03 9-9 9zm1-13h-2v6h2v2h-3v-8h3v-2z"/></svg>
    Andamento Economico
  </button>
  <button class="btn btn-settings" onclick="goTo('impostazioni.html')">
    <svg viewBox="0 0 24 24"><path d="M19.43 12.98c.04-.32.07-.65.07-.98s-.03-.66-.07-.98l2.11-1.65a.5.5 0 0 0 .12-.63l-2-3.46a.5.5 0 0 0-.61-.22l-2.49 1a6.994 6.994 0 0 0-1.7-.98l-.38-2.65A.5.5 0 0 0 14 2h-4a.5.5 0 0 0-.5.43l-.38 2.65c-.63.25-1.22.58-1.7.98l-2.49-1a.5.5 0 0 0-.61.22l-2 3.46a.5.5 0 0 0 .12.63l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65a.5.5 0 0 0-.12.63l2 3.46c.14.24.43.33.61.22l2.49-1c.48.4 1.07.73 1.7.98l.38 2.65c.05.27.27.43.5.43h4c.23 0 .45-.16.5-.43l.38-2.65c.63-.25 1.22-.58 1.7-.98l2.49 1c.18.11.47.02.61-.22l2-3.46a.5.5 0 0 0-.12-.63l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5S10.07 8.5 12 8.5s3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/></svg>
    Impostazioni
  </button>
  <button class="btn btn-clients" onclick="goTo('clienti.html')">
    <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5s-3 1.34-3 3 1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
    Clienti
  </button>
</div>

<script>
function goTo(page) {
  window.location.href = page;
}

const cloudIcon = document.getElementById("cloud-status");
const fraseElem = document.getElementById("frase-motivazionale");

// URL CSV pubblicato
const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSk18AbYypWlNTxK9KzWVRSImHV847cAvhIpUn9aZu1Wgi9OKl27-4S6AK2NfXSO2yI0bdvqjVHKgQa/pub?output=csv";

// Nuvola cloud semplice
async function testCloudConnection() {
  cloudIcon.className = "cloud-icon pending";
  try {
    const res = await fetch(SHEET_CSV_URL);
    const text = await res.text();
    if (text && text.length > 0) {
      cloudIcon.className = "cloud-icon ok"; // verde
    } else {
      cloudIcon.className = "cloud-icon error"; // rosso
    }
  } catch (err) {
    cloudIcon.className = "cloud-icon error"; // rosso
    console.error("Errore cloud:", err);
  }
}

// Frase motivazionale dal web
async function mostraFraseWeb() {
  try {
    const response = await fetch("https://type.fit/api/quotes");
    const quotes = await response.json();
    const frase = quotes[Math.floor(Math.random() * quotes.length)];
    fraseElem.innerText = `"${frase.text}" - ${frase.author || "Anonimo"}`;
  } catch (err) {
    console.error("Errore fetch frase:", err);
    fraseElem.innerText = "Caricamento frase non disponibile";
  }
}

testCloudConnection();
mostraFraseWeb();
</script>
</body>
</html>
