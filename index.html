<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Registro Orario Lavoro Cloud</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>

    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <div class="container">
        <header>
            <div class="logo-area">
                <div class="logo-icon"><i class="fas fa-clock"></i></div>
                <div class="logo-text">REGISTRO<span>LAVORO</span></div>
            </div>
            <p class="subtitle">Gestione Ore, Trasferte e Note Cloud</p>
        </header>

        <div class="card">
            <h2 class="section-title"><i class="fas fa-plus-circle"></i> Inserimento Ore</h2>
            <div class="input-grid">
                <div class="input-group">
                    <label for="data"><i class="fas fa-calendar-day"></i> Data</label>
                    <input type="date" id="data">
                </div>
                <div class="input-group">
                    <label for="tipo"><i class="fas fa-briefcase"></i> Modalità</label>
                    <select id="tipo">
                        <option value="Sede">Sede (Tecnosistem)</option>
                        <option value="Trasferta Rientro">Trasferta (Rientro)</option>
                        <option value="Trasferta Pernotto">Trasferta (Pernotto)</option>
                        <option value="Trasferta Estero">Trasferta (Estero)</option>
                        <option value="Ferie">Ferie</option>
                        <option value="Permesso">Permesso</option>
                        <option value="Malattia">Malattia</option>
                    </select>
                </div>
            </div>

            <div class="input-grid">
                <div class="input-group">
                    <label><i class="fas fa-sign-in-alt"></i> Ora Inizio</label>
                    <div class="custom-dropdown" id="dropdown-inizio">
                        <div class="selected-option" id="inizio-text">08:00</div>
                        <div class="options-list" id="inizio-options"></div>
                    </div>
                </div>
                <div class="input-group">
                    <label><i class="fas fa-sign-out-alt"></i> Ora Fine</label>
                    <div class="custom-dropdown" id="dropdown-fine">
                        <div class="selected-option" id="fine-text">17:00</div>
                        <div class="options-list" id="fine-options"></div>
                    </div>
                </div>
            </div>

            <div class="input-grid">
                <div class="input-group checkbox-group">
                    <label><input type="checkbox" id="pausa" checked> Pausa Pranzo (1h)</label>
                </div>
                <div class="input-group">
                    <label for="luogo"><i class="fas fa-map-marker-alt"></i> Luogo</label>
                    <input type="text" id="luogo" placeholder="Es. Milano, Roma..." list="luoghi-comuni">
                    <datalist id="luoghi-comuni"></datalist>
                </div>
            </div>

            <div class="input-group full-width">
                <label for="note"><i class="fas fa-sticky-note"></i> Note / Attività Svolta</label>
                <textarea id="note" placeholder="Descrivi il lavoro svolto..."></textarea>
            </div>

            <div class="calc-preview" id="preview-ore">
                Ore calcolate: <span>8.0</span> | Straordinario: <span>0.0</span>
            </div>

            <div class="button-group">
                <button id="save-btn" class="btn-main"><i class="fas fa-save"></i> Salva Attività</button>
                <button id="cloud-import-btn" class="btn-outline"><i class="fas fa-sync"></i> Sincronizza Cloud</button>
            </div>
            <p id="cloud-status-msg" class="status-msg"></p>
        </div>

        <div class="card">
            <div class="card-header-toggle" id="toggle-registro">
                <h2 class="section-title"><i class="fas fa-list"></i> Registro Attività</h2>
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="card-content" id="registro-content">
                <div class="filter-bar">
                    <input type="text" id="search-input" placeholder="Cerca luogo o note...">
                    <select id="filter-month"><option value="all">Tutti i mesi</option></select>
                    <select id="filter-year"></select>
                </div>
                <div class="table-responsive">
                    <table id="table-registro">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Orario</th>
                                <th>Tot</th>
                                <th>Str</th>
                                <th>Tipo</th>
                                <th>Luogo</th>
                                <th>Azioni</th>
                            </tr>
                        </thead>
                        <tbody id="table-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="card">
            <h2 class="section-title"><i class="fas fa-chart-pie"></i> Riepilogo Economico</h2>
            <div class="stats-grid">
                <div class="stat-item">
                    <label>Totale Mese Lordo</label>
                    <div id="stat-lordo">€ 0.00</div>
                </div>
                <div class="stat-item highlight">
                    <label>Netto Stimato</label>
                    <div id="stat-netto">€ 0.00</div>
                </div>
                <div class="stat-item">
                    <label>Ore Straordinario</label>
                    <div id="stat-str">0.0 h</div>
                </div>
            </div>
            <div class="chart-container" style="height: 300px; margin-top: 20px;">
                <canvas id="monthlyChart"></canvas>
            </div>
            <div class="button-group center">
                <button id="export-pdf-btn" class="btn-pdf"><i class="fas fa-file-pdf"></i> Esporta Report PDF</button>
            </div>
        </div>

        <div class="card">
            <div class="card-header-toggle" id="toggle-settings">
                <h2 class="section-title"><i class="fas fa-cogs"></i> Impostazioni e Backup</h2>
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="card-content" id="settings-content" style="display:none;">
                <div class="input-grid">
                    <div class="input-group">
                        <label>Base Lorda (€)</label>
                        <input type="number" id="setting-base" value="2300">
                    </div>
                    <div class="input-group">
                        <label>Tariffa Str. 25% (€/h)</label>
                        <input type="number" id="setting-over25" value="14.5">
                    </div>
                </div>
                <div class="input-group">
                    <label>URL Google Apps Script</label>
                    <input type="text" id="setting-cloud-url" placeholder="https://script.google.com/...">
                </div>
                <div class="button-group">
                    <button id="backup-json-btn" class="btn-small">Backup JSON</button>
                    <button id="restore-json-btn" class="btn-small">Ripristina JSON</button>
                    <input type="file" id="file-input" style="display: none;">
                </div>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script src="js/config.js"></script>
    <script src="js/logic.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
